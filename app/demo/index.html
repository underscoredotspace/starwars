<html data-ng-app="testApp">
  <head>
    <title>Star Wars</title>
    <link rel="stylesheet" href="style.css">
  </head>
  
  <body data-ng-controller="swTableController as planets">
    <ct-toasts></ct-toasts>
    <div data-ng-repeat="planet in planets.data track by $index">
      {{planet.name}}
    </div>

    <script src="/angular/angular.min.js" integrity="sha256-jFCqhWdzGFjoG8/SAncY2afI/Xv1TPSWSZrb9dpXQbk=" crossorigin="anonymous"></script>
    <script src="/ng-cleantoast/dist/ng-cleantoast.min.js"></script>
    <script src="dotSpace.starWars.js"></script>
    <script>
    (function() {
      angular.module('testApp', ['dotSpace.starWars', 'ngCleanToast'])
      
      .controller('swTableController', swTableController)
        
        swTableController.$inject = ['swapiService', '$scope', 'toasts']
        
        function swTableController (swapiService, scope, toasts) {
          const vm = this
          swapiService.get('planets')
          .then(planets => {
            scope.$apply(function() {
              vm.data = planets.results
            })
          })
          .catch(err => {
            scope.$apply(function(){toasts.create(toasts.type('error'), '', err, toasts.sticky)})
          })
        }
    })();
    </script>
  </body>
</html>